<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- Metas -->
		<title>curtains.js | Home</title>
	    <meta name="description" content="curtains.js is a lightweight vanilla WebGL javascript library that turns HTML elements into interactive textured planes." />
	    <link rel="canonical" href="https://www.martin-laxenaire.fr/libs/curtainsjs/" />

	    <!-- Facebook OG -->
	    <meta property="og:title" content="curtains.js | Home" />
	    <meta property="og:type" content="website" />
	    <meta property="og:description" content="curtains.js is a lightweight vanilla WebGL javascript library that turns HTML elements into interactive textured planes." />
	    <meta property="og:url" content="https://www.martin-laxenaire.fr/libs/curtainsjs/" />
	    <meta property="og:image" content="https://www.martin-laxenaire.fr/libs/curtainsjs/images/intro-background.jpg"/>

	    <!-- Twitter card -->
	    <meta name="twitter:card" content="summary_large_image">
	    <meta name="twitter:site" content="@webdesign_ml">
		<meta name="twitter:creator" content="@webdesign_ml">
		<meta name="twitter:title" content="curtains.js | Home" />
		<meta name="twitter:description" content="curtains.js is a lightweight vanilla WebGL javascript library that turns HTML elements into interactive textured planes." />
		<meta name="twitter:image" content="https://www.martin-laxenaire.fr/libs/curtainsjs/images/intro-background.jpg" />


		<link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Abril+Fatface" rel="stylesheet">
		<link rel="stylesheet" href="style.css" type="text/css" />
	</head>
	<body>
        <div id="page-wrap">

			<div id="canvas"></div>

			<div id="content">

				<header id="header">
					<div class="wrapper">
						<div id="header-wrapper" class="flex-wrapper">
							<div id="header-title">
								<a href="index.html" title="Home">curtains.js</a>
							</div>
							<nav id="main-menu">
								<ul class="flex-wrapper">
									<li>
										<a href="get-started.html">Get started</a>
									</li>
									<li>
										<a href="documentation.html">Docs</a>
									</li>
									<li>
										<a href="download.html">Download</a>
									</li>
								</ul>
							</nav>
						</div>
					</div>
				</header>

				<section id="intro" class="flex-wrapper">
					<h1>curtains.js</h1>
					<h2>easy WebGL tool to animate images and videos</h2>

					<div class="curtain" data-vs-id="intro-vs" data-fs-id="intro-fs">
						<img data-sampler="curtainSampler" src="images/intro-background.jpg" />
					</div>
				</section>

				<section class="content-section">
					<div class="wrapper">
						<div class="text-section">
							<h2>What is it ?</h2>
							<p>
								Shaders are the next front-end web developpment big thing, with the ability to create very powerful 3D interactions and animations. A lot of very good javascript libraries already handle WebGL but with most of them it's kind of a headache to position your meshes relative to the DOM elements of your web page.
							</p>
							<p>
								curtains.js was created with just that issue in mind. It is a small vanilla WebGL javascript library that converts HTML elements containing images and videos into 3D WebGL textured planes, allowing you to animate them via shaders.<br />
								You can define each plane size and position via CSS, which makes it super easy to add WebGL responsive planes all over your pages.
							</p>
						</div>

						<div class="text-section">
							<h2>Download</h2>
							<p>
								<a href="build/curtains.js" id="download-full-lib-link" download target="_blank" title="download curtains.js v1.2">curtains.js v1.2 (64Ko)</a> - <a href="build/curtains.min.js" id="download-min-lib-link" download target="_blank" title="download curtains.min.js v1.2">curtains.min.js v1.2 (25Ko)</a> - <a href="https://github.com/martinlaxenaire/curtainsjs" title="curtains.js on Github" target="_blank">Github</a>.
							</p>
						</div>

						<div class="text-section">
							<h2>Examples</h2>
							<h3>Images</h3>
							<p>
								<a href="examples/vertex-coords-helper/index.html" title="Vertex coordinates helper" target="_blank">Vertex coordinates helper</a><br />
								<a href="examples/simple-plane/index.html" title="Simple plane" target="_blank">Simple plane</a><br />
								<a href="examples/multiple-textures/index.html" title="Multiple textures" target="_blank">Multiple textures with a displacement shader</a><br />
								<a href="examples/multiple-planes/index.html" title="Multiple planes" target="_blank">Multiple planes</a><br />
								<a href="examples/asynchronous-textures/index.html" title="Asynchronous textures loading" target="_blank">Asynchronous textures loading</a><br />
								<a href="examples/ajax-navigation/index.html" title="Asynchronous textures loading" target="_blank">AJAX navigation</a><br />
								<a href="examples/canvas-height-performance/index.html" title="Canvas size, performance and perspective" target="_blank">Canvas size, performance and perspective</a>
							</p>
							<h3>Videos</h3>
							<p>
								<a href="examples/simple-video-plane/index.html" title="Simple video plane" target="_blank">Simple video plane</a><br />
								<a href="examples/multiple-video-textures/index.html" title="Multiple video textures" target="_blank">Multiple video textures with a displacement shader</a><br />
							</p>
						</div>

						<div class="text-section">
							<h2>Knowledge and technical requirements</h2>
							<p>
								It is easy to use but you will of course have to possess good basics of HTML, CSS and javascript.
							</p>
							<p>
								If you've never heard about shaders, you may want to learn a bit more about them on <a href="https://thebookofshaders.com/" title="The Book of Shaders" target="_blank">The Book of Shaders</a> for example. You will have to understand what are the vertex and fragment shaders, the use of uniforms as well as the GLSL syntax basics.
							</p>
						</div>

						<div class="text-section">
							<h2>Changelog</h2>
							<h3>Version 1.2</h3>
							<ul>
								<li>
									Added support for videos as textures.
								</li>
								<li>
									Sort planes by their vertices length in order to avoid redundant buffer binding calls during draw loop.
								</li>
								<li>
							        Refactored and cleaned code.
							    </li>
							</ul>
							<h3>Version 1.1</h3>
							<ul>
								<li>
									WebGL context viewport size now based on drawingBufferWidth and drawingBufferHeight.
								</li>
								<li>
							        Cleaned and refactored code in order to add support for lost and restored context events.
							    </li>
							</ul>
						</div>

						<div class="text-section">
							<h2>Todo and improvements</h2>
							<ul>
								<li>
									Tests, tests and more tests.
								</li>
								<li>
									Improve performance if possible.
								</li>
								<li>
									...
								</li>
							</ul>
						</div>


						<div class="text-section">
							<h2>About</h2>
							<p>
								This library is released under the MIT license which means it is free to use for personnal and commercial projects.
							</p>
							<p>
								All images used in the examples were taken by <a href="https://marionbornaz.com/" title="Marion Bornaz" target="_blank">Marion Bornaz</a> during the <a href="https://www.miragefestival.com/" title="Mirage Festival" target="_blank">Mirage Festival</a>.
							</p>
							<p>
								All examples video footages were shot by <a href="http://analogueprod.com/" title="Analogue Production" target="_blank">Analogue Production</a>.
							</p>
							<p>
								Many thanks to <a href="https://webglfundamentals.org/" title="webglfundamentals.org" target="_blank">webglfundamentals.org</a> tutorials which helped me a lot.
							</p>
							<p>
								Author of this library is <a href="https://www.martin-laxenaire.fr/" title="Martin Laxenaire" target="_blank">Martin Laxenaire</a>, a french creative front-end developper based in Lyon.<br />
								Found a bug ? Have questions ? Do not hesitate to <a href="mailto:martin.laxenaire@gmail.com" title="contact me">email me</a> or send me a tweet : <a href="https://twitter.com/webdesign_ml" target="_blank" title="My twitter">@webdesign_ml</a>.
							</p>
						</div>



						<div id="showcase" class="text-section">
							<h2>Showcase</h2>

							<p>
								Here you'll find websites that use curtains.js with their own custom shaders:
							</p>

							<div class="websites-examples-gallery">

								<a class="website-example-item" href="https://nordik.org/" title="Nördik Impakt 2018" target="_blank">
									<div class="website-example-cover">
										<div class="curtain">
											<img src="images/curtains-js-nordik-impakt.jpg" alt="Nördik Impakt 2018" data-sampler="uExample" />
										</div>
									</div>
								</a>


								<a class="website-example-item" href="http://lookbook-olaian.fr/" title="Olaian Lookbook" target="_blank">
									<div class="website-example-cover">
										<div class="curtain">
											<img src="images/curtains-js-olaian-lookbook.jpg" alt="Olaian Lookbook" data-sampler="uExample" />
										</div>
									</div>
								</a>

							</div>
						</div>

					</div>
				</section>
			</div>
		</div>

        <script id="intro-vs" type="x-shader/x-vertex">
			#ifdef GL_ES
			precision mediump float;
			#endif

			// default mandatory variables
			attribute vec3 aVertexPosition;
			attribute vec2 aTextureCoord;

			uniform mat4 uMVMatrix;
    		uniform mat4 uPMatrix;

			// custom variables
			varying vec3 vVertexPosition;
			varying vec2 vTextureCoord;

			uniform float uMouseTime;
			uniform vec2 uResolution;
			uniform vec2 uMousePosition;
			uniform float uMouseMoveStrength;


			void main() {

				vec3 vertexPosition = aVertexPosition;

				// fix the curtain on top (y coord ranges from top : 1.0 to bottom : -1.0)
				float yCoordRatio = vertexPosition.y - 1.0;


				float distanceFromMouse = distance(vec2(uMousePosition.x, 0.0), vec2(vertexPosition.x, 0.0));

				float waveSinusoid = cos(10.0 * (uResolution.x / uResolution.y) * ((1.0 / (distanceFromMouse - 2.0)) - (uMouseTime / 500.0)));

				float xAttenuation = ((2.0 - abs(uMousePosition.x - vertexPosition.x)) / 2.0);
				float yAttenuation = ((-1.0 * uMousePosition.y) + 1.0) / 2.0;
				if(uMousePosition.y <= -1.0) {
					yAttenuation = yAttenuation + (uMousePosition.y + 1.0) * 1.5;
				}
				yAttenuation = clamp(yAttenuation, 0.0, 1.0);

				float curtainEffect = yCoordRatio  * waveSinusoid * uMouseMoveStrength * xAttenuation * yAttenuation;

				float xDisplacement = abs(yCoordRatio) * sign(vertexPosition.x);

				vertexPosition.z +=  curtainEffect / 15.0;
				vertexPosition.x +=  curtainEffect * (uResolution.x / uResolution.y) * xDisplacement / 120.0;

			   	gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);

			   	// varyings
			   	vTextureCoord = aTextureCoord;
			   	vVertexPosition = vertexPosition;
			}
        </script>
        <script id="intro-fs" type="x-shader/x-fragment">
			#ifdef GL_ES
			precision mediump float;
			#endif

			varying vec3 vVertexPosition;
			varying vec2 vTextureCoord;

			uniform sampler2D curtainSampler;


			void main( void ) {

				vec2 textureCoords = vec2(vTextureCoord.x, vTextureCoord.y);

				// slides transitions
				vec4 finalColor = texture2D(curtainSampler, textureCoords);

				finalColor.rgb -= clamp(-vVertexPosition.z / 5.0, 0.0, 1.0);
				finalColor.rgb += clamp(vVertexPosition.z / 5.0, 0.0, 1.0);

				// handling premultiplied alpha
				finalColor = vec4(finalColor.rgb * finalColor.a, finalColor.a);

				gl_FragColor = finalColor;
			}
        </script>


		<script id="simple-shader-vs" type="x-shader/x-vertex">
			#ifdef GL_ES
			precision mediump float;
			#endif

			// default mandatory variables
			attribute vec3 aVertexPosition;
			attribute vec2 aTextureCoord;

			uniform mat4 uMVMatrix;
    		uniform mat4 uPMatrix;

			// custom variables
			varying vec3 vVertexPosition;
			varying vec2 vTextureCoord;

			uniform float uTime;

			void main() {
				vec3 vertexPosition = aVertexPosition;

				// a float varying from -1.5 to 1.5
				float waveCoords = ((uTime / 45.0) * 3.5) - 1.75;

				// distance from the waveCoords to the vertex coordinates
				float distanceToWave = distance(vec2(vertexPosition.x, 0.0), vec2(waveCoords, 0.0));

				//vertexPosition.z = -2.0;

				// nice little wave animation from left to right or right to left depending on the timer
				vertexPosition.z -= cos(clamp(distanceToWave, 0.0, 0.75) * 3.141592) - cos(0.75 * 3.141592) + (2.0 * sin(3.141592 * uTime / 90.0));

			   	gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);

			   	// varyings
			   	vTextureCoord = aTextureCoord;
			   	vVertexPosition = vertexPosition;
			}
        </script>
        <script id="simple-shader-fs" type="x-shader/x-fragment">

			#ifdef GL_ES
			precision mediump float;
			#endif

			uniform float uTime;

			varying vec3 vVertexPosition;
			varying vec2 vTextureCoord;

			uniform sampler2D uExample;


			void main( void ) {

				// get our texture coords
				vec2 textureCoords = vec2(vTextureCoord.x, vTextureCoord.y);
				vec4 finalColor = texture2D(uExample, textureCoords);

				gl_FragColor = finalColor;
			}
        </script>

		<script src="build/curtains.js" type="text/javascript"></script>
        <script src="js/main.navigation.js" type="text/javascript"></script>

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-29368338-1"></script>
		<script>
		  	window.dataLayer = window.dataLayer || [];
		  	function gtag(){dataLayer.push(arguments);}
		  	gtag('js', new Date());

		  	gtag('config', 'UA-29368338-1');
		</script>

		<script type="text/javascript">
			document.getElementById("download-full-lib-link").addEventListener("click", function() {
		        gtag('event', 'click', {
		            'event_category': 'engagement',
		            'event_label': 'Downloaded full lib',
		        });
		    });

			document.getElementById("download-min-lib-link").addEventListener("click", function() {
		        gtag('event', 'click', {
		            'event_category': 'engagement',
		            'event_label': 'Downloaded minified lib',
		        });
		    });
		</script>

	</body>
</html>
